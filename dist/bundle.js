!function(e){var S={};function N(n){if(S[n])return S[n].exports;var a=S[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,N),a.l=!0,a.exports}N.m=e,N.c=S,N.d=function(e,S,n){N.o(e,S)||Object.defineProperty(e,S,{enumerable:!0,get:n})},N.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},N.t=function(e,S){if(1&S&&(e=N(e)),8&S)return e;if(4&S&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(N.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&S&&"string"!=typeof e)for(var a in e)N.d(n,a,function(S){return e[S]}.bind(null,a));return n},N.n=function(e){var S=e&&e.__esModule?function(){return e.default}:function(){return e};return N.d(S,"a",S),S},N.o=function(e,S){return Object.prototype.hasOwnProperty.call(e,S)},N.p="",N(N.s=0)}([function(e,S,N){"use strict";N.r(S);var n=[["ES","SW","ES","SW","ES","SW","ES","SW","S","S","ES","ESW","W","ES","EW","SW"],["NS","NS","NS","NES","NSW","NES","NSW","NES","NESW","NESW","NW","NES","SW","NE","SW","NS"],["NS","NS","NS","N","NE","NW","NE","NW","N","NS","ES","NSW","NES","SW","NS","NS"],["NS","NS","NS","S","ES","SW","S","ES","SW","NE","NW","NE","NSW","NS","NS","NS"],["NS","NS","NS","NES","NW","NE","NSW","NS","NS","ES","EW","SW","NE","NSW","NS","NS"],["NS","NS","NS","NES","EW","SW","NE","NW","NE","NW","ES","NEW","EW","NW","NS","NS"],["NS","NS","NS","N","ES","NEW","SW","ES","EW","SW","NE","EW","SW","ES","NW","NS"],["NS","NS","NS","S","NE","ESW","NW","NES","SW","NES","EW","EW","NW","NE","SW","NS"],["NS","NS","NES","NSW","ES","NEW","W","NES","NW","NS","ES","SW","ES","SW","NS","NS"],["NS","NS","NS","NS","NE","SW","S","NE","EW","NEW","NW","NE","NW","NE","NW","NS"],["NS","NES","NW","NES","SW","NE","NESW","W","ES","SW","ES","SW","ES","SW","ES","NW"],["NS","NS","ES","NW","NE","EW","NEW","W","NS","NES","NW","NE","NSW","NS","NE","SW"],["NS","NE","NW","ES","SW","ES","SW","S","NES","NEW","W","E","NEW","NSW","S","NS"],["NS","S","S","NS","NS","NS","NS","NES","NESW","SW","ES","SW","ES","NEW","NSW","NS"],["NES","NESW","NESW","NESW","NESW","NESW","NESW","NSW","NS","NES","NSW","NES","NSW","ES","NSW","NS"],["N","N","N","N","N","N","N","NE","NEW","NW","NE","NW","NE","NW","NE","NW"]];document.addEventListener("DOMContentLoaded",e=>{let S,N=document.getElementById("myCanvas"),a=N.getContext("2d");const t=["N","S","E","W"],r=n[0].length,i=n.length;let E=N.height/i,W=N.width/r,c={img_s:new Image,img_n:new Image,img_e:new Image,img_w:new Image,x:3,y:3,facing:"S",trackX:0,trackY:0,memory:[],goal:!1},o=[];for(let e=0;e<i;e++){o[e]=[];for(let S=0;S<i;S++){let N=S*W,a=e*E;o[e][S]={x:N,y:a,openings:n[e][S]}}}c.faceN=(()=>{c.facing="N"}),c.faceS=(()=>{c.facing="S"}),c.faceE=(()=>{c.facing="E"}),c.faceW=(()=>{c.facing="W"});const s=e=>{switch(c.facing){case"N":return e.indexOf("W")>-1;case"S":return e.indexOf("E")>-1;case"E":return e.indexOf("N")>-1;case"W":return e.indexOf("S")>-1}},g=e=>{switch(c.facing){case"N":return e.indexOf("E")>-1;case"S":return e.indexOf("W")>-1;case"E":return e.indexOf("S")>-1;case"W":return e.indexOf("N")>-1}},f=e=>{e.openings.indexOf(c.facing)>=0&&(c.memory.push(e),(()=>{switch(c.facing){case"N":c.y-=E,c.trackY-=1;break;case"S":c.y+=E,c.trackY+=1;break;case"E":c.x+=W,c.trackX+=1;break;case"W":c.x-=E,c.trackX-=1}})())},l=()=>{switch(c.facing){case"N":c.faceE();break;case"S":c.faceW();break;case"E":c.faceS();break;case"W":c.faceN()}},u=()=>{switch(c.facing){case"N":c.faceW();break;case"S":c.faceE();break;case"E":c.faceN();break;case"W":c.faceS()}},m=()=>{l(),l()},d=()=>{clearInterval(S),S=setInterval(()=>{let e=o[c.trackY][c.trackX];console.log(e),c.memory.filter(S=>S===e).length<=1?e.openings.indexOf(c.facing)<=-1&&!s(e.openings)&&!g(e.openings)?m():e.openings.indexOf(c.facing)<=-1&&g(e.openings)?l():e.openings.indexOf(c.facing)<=-1&&s(e.openings)&&!g(e.openings)?u():g(e.openings)&&l():c.memory.indexOf(e)>=0&&c.memory.filter(S=>S===e).length>1&&(e.openings.indexOf(c.facing)<=-1&&!s(e.openings)&&!g(e.openings)?m():e.openings.indexOf(c.facing)<=-1&&g(e.openings)?l():e.openings.indexOf(c.facing)<=-1&&s(e.openings)&&!g(e.openings)?u():s(e.openings)&&u()),f(e)},200)};document.addEventListener("keyup",function(e){switch(e.keyCode){case 8:clearInterval(S);break;case 13:d()}},!0);const p=()=>{a.clearRect(0,0,N.width,N.height),(()=>{for(let N=0;N<i;N++)for(let n=0;n<i;n++){let r=o[N][n],i=[];for(let e=0;e<t.length;e++)-1===r.openings.indexOf(t[e])&&i.push(t[e]);for(let N=0;N<i.length;N++){switch(a.beginPath(),i[N]){case"N":a.moveTo(r.x,r.y),a.lineTo(r.x+W,r.y);break;case"S":var e=r.y+E;a.moveTo(r.x,e),a.lineTo(r.x+W,e);break;case"E":var S=r.x+W;a.moveTo(S,r.y),a.lineTo(S,r.y+E);break;case"W":e=r.y+E,a.moveTo(r.x,r.y),a.lineTo(r.x,e)}a.stroke(),a.closePath()}}})(),(()=>{switch(c.facing){case"N":a.drawImage(c.img_n,c.x,c.y);break;case"S":a.drawImage(c.img_s,c.x,c.y);break;case"E":a.drawImage(c.img_e,c.x,c.y);break;case"W":a.drawImage(c.img_w,c.x,c.y)}})(),window.requestAnimationFrame(p)};c.img_s.src="app/images/mouse_20x20_down.png",c.img_n.src="app/images/mouse_20x20_up.png",c.img_e.src="app/images/mouse_20x20_right.png",c.img_w.src="app/images/mouse_20x20_left.png",window.requestAnimationFrame(p)})}]);